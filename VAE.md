结构：

核心：关注潜在变量，因此对编码器的输出样本映射到隐空间重新采样出新样本。

采样过程的梯度传播

 先计算∂L/∂z，再梯度传播到均值和标准差，即计算∂L/∂mean = ∂L/∂z * ∂z/∂mean和∂L/∂log_var = ∂L/∂z * ∂z/∂log_var

结构特性

在生成式模型模型中，常见使用一个概率分布来计算损失和预测，因为可以不经给出预测的最可能值，还能很好的表现模型的不确定性。同时能显著提高模型的鲁棒性，因为模型预测的自信度可以通过分布的方差表现，在训练时对低自信度的预测实施一定惩罚，即可提高鲁棒性。

概率分布在训练中有两种常见的应用方法

1.计算损失时直接比较预测的分布和ground-truth分布

2.先从分布采样得到一串数据后，再和对应的真实值计算loss

VAE使用的是第二种，是因为其独特的结构和目标

潜在空间的连续性：

VAEs的一个关键特性是它们能够学习一个连续的潜在空间。为了实现这一点，模型需要能够从潜在空间中的任何点生成有效的输出。通过从潜在分布中采样并强制模型重建输入，VAEs确保了潜在空间的连续性。而潜空间的连续性需要在传播时使用均值和方差来传递。
变分推断：

VAEs的目标是最大化数据的边际对数似然，但这通常是不可计算的。为了解决这个问题，VAEs使用变分推断来近似真实的后验分布。这涉及到定义一个参数化的近似后验分布（通常是高斯分布），然后从这个分布中采样。
重参数化技巧：

直接从潜在分布中采样会导致梯度无法传递，因为采样是一个随机过程。为了解决这个问题，VAEs使用了重参数化技巧。这意味着采样过程被分解为一个确定性的变换和一个独立的噪声源，从而允许梯度传递。
损失函数的组成：

VAEs的损失函数由两部分组成：重建损失和KL散度。重建损失鼓励模型重建输入，而KL散度则鼓励近似后验分布接近先验分布（通常是标准正态分布）。为了计算重建损失，模型需要从近似后验分布中采样。
